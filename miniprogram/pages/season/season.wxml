<view class="container">
  <view class="section-title">{{i18n.season_leaderboard}}</view>
  <view class="card leaderboard-card">
    <block wx:if="{{leaderboard.length === 0}}">
      <view class="empty-message">{{i18n.season_no_results}}</view>
    </block>
    <view class="leaderboard-table" wx:if="{{leaderboard.length > 0}}">
      <view class="table-header">
        <text class="col-rank">#</text>
        <text class="col-name">{{i18n.players_title || 'Player'}}</text>
        <text class="col-points">{{i18n.season_points || 'Pts'}}</text>
      </view>
      <view class="table-row" wx:for="{{leaderboard}}" wx:key="playerId">
        <text class="col-rank">{{index + 1}}</text>
        <text class="col-name">{{item.name}}</text>
        <text class="col-points">{{item.points}}</text>
      </view>
    </view>
  </view>

  <view class="section-title">{{i18n.admin_manage_events}}</view>
  <block wx:if="{{events.length === 0}}">
    <view class="card">
      <view class="empty-message">{{i18n.season_no_results}}</view>
    </view>
  </block>
  <block wx:for="{{events}}" wx:key="_id">
    <view class="card event-card {{item.status === 'completed' ? 'completed' : ''}}" data-id="{{item._id}}" bindtap="goToEvent">
      <view class="event-header">
        <view class="title clickable">{{item.title}}</view>
        <view class="status-badge {{item.status}}">{{item.status}}</view>
      </view>
      <view class="label">{{item.date}} - {{item.location}}</view>
      <view class="label hint">{{i18n.admin_tap_to_manage || 'Tap to manage'}}</view>
    </view>
  </block>

  <view class="section-header">
    <view class="section-title">{{showAllMatches ? i18n.season_all_matches : i18n.season_recent_matches}}</view>
    <view class="toggle-link" bindtap="toggleShowAllMatches">
      {{showAllMatches ? i18n.season_show_recent : i18n.season_view_all}}
    </view>
  </view>

  <block wx:if="{{displayedMatches.length === 0}}">
    <view class="card">
      <view class="empty-message">{{i18n.season_no_matches}}</view>
    </view>
  </block>

  <block wx:for="{{displayedMatches}}" wx:key="_id">
    <view class="card match-card {{item.status}}">
      <view class="match-type">{{item.matchTypeLabel}}</view>
      <view class="match-teams">
        <view class="team {{item.winner === 'A' ? 'winner' : ''}}">
          <text class="team-names">{{item.teamANames}}</text>
        </view>
        <text class="vs">vs</text>
        <view class="team {{item.winner === 'B' ? 'winner' : ''}}">
          <text class="team-names">{{item.teamBNames}}</text>
        </view>
      </view>
      <view class="match-score" wx:if="{{item.score}}">{{item.score}}</view>
      <view class="match-status">{{item.status}}</view>
    </view>
  </block>
</view>
